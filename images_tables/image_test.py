from image.tools import analyze_image_content

IMG_PATH = "imgs/2.png"
API_KEY = "sk-1fdbb0e4ce3943bab4b300ca867c1315"  # 替换为你的真实 Key
BASE_URL = "https://dashscope.aliyuncs.com/compatible-mode/v1"
MODEL = "qwen3-vl-8b-instruct"

# 运行函数
result = analyze_image_content(image_path=IMG_PATH, api_key=API_KEY, base_url=BASE_URL, model_name=MODEL)
print(result)


#输出结果：
#{'image_cls': 'flowchart', 'description': '好的，我们来详细分析这张流程图。\n\n---\n\n### 1. 识别图中的起始节点和结束节点\n\n- **起始节点**：位于图的最顶端，是一个圆角矩形（或椭圆形），内部文字为“开始”。\n- **结束节点**：位于图
# 的最底端，也是一个圆角矩形（或椭圆形），内部文字为“结束”。\n\n这两个节点标志着流程的起点和终点。\n\n---\n\n### 2. 按照逻辑顺序描述各个步骤、决策点及其流转方向\n\n整个流程遵循一个**嵌套的条件判断结构**，从上到下依次进行：\n\n1.
# **开始 → 输入**：\n    - 流程启动后，首先执行“输入”操作（平行四边形），表示接收一个输入值（虽然图中未说明输入内容，但根据后续判断，可以推断是某种语言名称或标识符）。\n\n2.  **第一个决策点：“是否为python”**：\n    - 这是一个菱形
# 决策框。\n    - 如果答案是 **YES**（绿色箭头），则直接流向“输出90”（矩形处理框）。\n    - 如果答案是 **NO**（蓝色箭头），则进入下一个决策点。\n\n3.  **第二个决策点：“是否为java”**：\n    - 只有在“是否为python”为 NO 的情况下才会
# 到达这里。\n    - 如果答案是 **YES**（绿色箭头），则流向“输出95”。\n    - 如果答案是 **NO**（蓝色箭头），则进入第三个决策点。\n\n4.  **第三个决策点：“是否为php”**：\n    - 只有在前两个判断都为 NO 的情况下才会到达这里。\n    - 如
# 果答案是 **YES**（绿色箭头），则流向“输出85”。\n    - 如果答案是 **NO**（蓝色箭头），则流向“输出0”。\n\n5.  **输出处理**：\n    - “输出90”、“输出95”、“输出85”、“输出0”都是矩形处理框，表示具体的输出动作。\n    - 所有输出路径最终
# 都汇聚到“结束”节点。\n\n---\n\n### 3. 解释不同形状或颜色代表的含义\n\n- **形状含义**：\n    - **圆角矩形/椭圆形**：表示流程的开始和结束。\n    - **平行四边形**：表示输入或输出数据。\n    - **矩形**：表示处理步骤或操作（如输出）
# 。\n    - **菱形**：表示决策点或条件判断。\n\n- **颜色含义**：\n    - **绿色箭头**：统一用于表示“YES”分支，即条件成立时的路径。\n    - **蓝色箭头**：统一用于表示“NO”分支，即条件不成立时的路径。\n    - 颜色区分使得流程图的逻辑更
# 清晰易读。\n\n---\n\n### 4. 将流程图转换为对应的 mermaid 代码\n\n以下是精确还原该流程图结构的 Mermaid 代码：\n\n```mermaid\nflowchart TD\n    A[开始] --> B[输入]\n    B --> C{是否为python}\n    C -- YES --> D[输出90]\n    C -- N
# O --> E{是否为java}\n    E -- YES --> F[输出95]\n    E -- NO --> G{是否为php}\n    G -- YES --> H[输出85]\n    G -- NO --> I[输出0]\n    D --> J[结束]\n    F --> J\n    H --> J\n    I --> J\n```\n\n> **注意**：Mermaid 中的 `-->`
#  表示单向箭头，`-- YES -->` 和 `-- NO -->` 是条件分支的写法。所有输出节点最终都指向“结束”，确保流程闭环。\n\n---\n\n### 5. 总结该流程旨在解决什么问题或描述什么系统\n\n这个流程图描述了一个**基于语言类型进行评分或赋值的简单规则系
# 统**。\n\n- **核心功能**：根据用户输入的语言名称（可能是字符串），匹配不同的编程语言，并输出一个预设的数值结果。\n- **具体映射关系**：\n    - 输入“python” → 输出 90\n    - 输入“java” → 输出 95\n    - 输入“php” → 输出 85\n    -
# 输入其他任何语言（未被匹配）→ 输出 0\n- **应用场景**：\n    - 可能用于教学系统中对不同编程语言的难度或受欢迎程度打分；\n    - 或者在某个竞赛/测评系统中，根据参赛者使用的语言给予基础分；\n    - 也可以作为简单的条件判断器，用于程
# 序中的逻辑分支控制。\n\n总而言之，这是一个**多层条件判断的评分机制流程图**，通过树状结构实现“优先匹配”和“默认值”的逻辑，结构清晰，易于理解和实现。'}
